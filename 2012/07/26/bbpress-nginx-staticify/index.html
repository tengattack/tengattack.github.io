<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8" />
  <title>bbPress nginx 静态化 - tengattack</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
  <meta name="generator" content="hanejs" />
  <link rel="apple-touch-icon" href="/images/apple-touch-icon.png" />
  <link rel="shortcut icon" href="/favicon.ico" />
  <link rel="alternate" href="/atom.xml" type="application/atom+xml" title="tengattack ATOM Feed" />
  <link rel="search" href="http://blog.tengattack.com/atom.xml" type="application/opensearchdescription+xml" title="tengattack" />
  <link rel="stylesheet" type="text/css" href="/css/style.css" />
</head>
<body>
  <div class="site">
    <div id="top"></div>
    <div class="site-inner">
      <header class="site-header">
        <div class="site-header-main">
          <div class="site-branding">
            <a class="site-title" href="/" title="tengattack">
              <h1>tengattack</h1>
            </a>
          </div>
          <div class="site-tabs">
            <ul class="site-tab-nav">
              <li class="active"><a href="/" title="Blog">Blog</a></li>
              <li><a href="/about/" title="关于">关于</a></li>
              <li><a href="/projects/" title="我的项目">我的项目</a></li>
            </ul>
          </div>
        </div>
      </header>
      <div class="site-content">
        <div class="content-area">
          <main class="site-main">
            <article>
              <header class="entry-header">
                <a class="entry-title" href="/2012/07/26/bbpress-nginx-staticify/">
                  <h2>bbPress nginx 静态化</h2>
                </a><span class="posted-on"><time datetime="2012-07-26T09:15:20.000Z">Thursday, July 26, 2012 5:15 PM</time></span></header>
              <div class="entry-content"> 最近开始接触到bbPress这个简洁清爽的论坛程序，比起discuz它可是舒服的很，没有一些多余的无用的垃圾功能，插件也很丰富（相对）。不过，他也一样继承了wordpress的蛋疼的模板的方法。 我们现在来看看如何将它静态化： <strong>这里使用的bbPress是1.1版本，其他的版本可以类推。</strong> 我们了解到，bbPress在Apache中静态化设置是这样的： [sourcecode language=&quot;plain&quot;] RewriteRule
                ^page/([0-9]+)/?$ /index.php?page=$1 [L,QSA] RewriteRule ^forum/([^/]+)/page/([0-9]+)/?$ /forum.php?id=$1&amp;page=$2 [L,QSA] RewriteRule ^forum/([^/]+)/?$ /forum.php?id=$1 [L,QSA] RewriteRule ^forum/?$ / [R=302,L,QSA] RewriteRule ^topic/([^/]+)/page/([0-9]+)/?$
                /topic.php?id=$1&amp;page=$2 [L,QSA] RewriteRule ^topic/([^/]+)/?$ /topic.php?id=$1 [L,QSA] RewriteRule ^topic/?$ / [R=302,L,QSA] RewriteRule ^tags/([^/]+)/page/([0-9]+)/?$ /tags.php?tag=$1&amp;page=$2 [L,QSA] RewriteRule ^tags/([^/]+)/?$
                /tags.php?tag=$1 [L,QSA] RewriteRule ^tags/?$ /tags.php [L,QSA] RewriteRule ^profile/([^/]+)/page/([0-9]+)/?$ /profile.php?id=$1&amp;page=$2 [L,QSA] RewriteRule ^profile/([^/]+)/([^/]+)/?$ /profile.php?id=$1&amp;tab=$2 [L,QSA] RewriteRule
                ^profile/([^/]+)/([^/]+)/page/([0-9]+)/?$ /profile.php?id=$1&amp;tab=$2&amp;page=$3 [L,QSA] RewriteRule ^profile/([^/]+)/?$ /profile.php?id=$1 [L,QSA] RewriteRule ^profile/?$ /profile.php [L,QSA] RewriteRule ^view/([^/]+)/page/([0-9]+)/?$
                /view.php?view=$1&amp;page=$2 [L,QSA] RewriteRule ^view/([^/]+)/?$ /view.php?view=$1 [L,QSA] RewriteRule ^rss/?$ /rss.php [L,QSA] RewriteRule ^rss/topics/?$ /rss.php?topics=1 [L,QSA] RewriteRule ^rss/forum/([^/]+)/?$ /rss.php?forum=$1
                [L,QSA] RewriteRule ^rss/forum/([^/]+)/topics/?$ /rss.php?forum=$1&amp;topics=1 [L,QSA] RewriteRule ^rss/topic/([^/]+)/?$ /rss.php?topic=$1 [L,QSA] RewriteRule ^rss/tags/([^/]+)/?$ /rss.php?tag=$1 [L,QSA] RewriteRule ^rss/tags/([^/]+)/topics/?$
                /rss.php?tag=$1&amp;topics=1 [L,QSA] RewriteRule ^rss/profile/([^/]+)/?$ /rss.php?profile=$1 [L,QSA] RewriteRule ^rss/view/([^/]+)/?$ /rss.php?view=$1 [L,QSA] RewriteCond %{REQUEST_FILENAME} !-f RewriteCond %{REQUEST_FILENAME} !-d RewriteRule
                ^.*$ /index.php [L] [/sourcecode] 稍微修改一下，bbPress就可以在nginx中设置静态化链接了： [sourcecode language=&quot;plain&quot;] rewrite ^/page/([0-9]+)/?$ /index.php?page=$1 last; rewrite ^/forum/([^/]+)/page/([0-9]+)/?$ /forum.php?id=$1&amp;page=$2 last;
                rewrite ^/forum/([^/]+)/?$ /forum.php?id=$1 last; rewrite ^/forum/?$ /; rewrite ^/topic/([^/]+)/page/([0-9]+)/?$ /topic.php?id=$1&amp;page=$2 last; rewrite ^/topic/([^/]+)/?$ /topic.php?id=$1 last; rewrite ^/topic/?$ /; rewrite ^/tags/([^/]+)/page/([0-9]+)/?$
                /tags.php?tag=$1&amp;page=$2 last; rewrite ^/tags/([^/]+)/?$ /tags.php?tag=$1 last; rewrite ^/tags/?$ /tags.php last; rewrite ^/profile/([^/]+)/page/([0-9]+)/?$ /profile.php?id=$1&amp;page=$2 last; rewrite ^/profile/([^/]+)/([^/]+)/?$
                /profile.php?id=$1&amp;tab=$2 last; rewrite ^/profile/([^/]+)/([^/]+)/page/([0-9]+)/?$ /profile.php?id=$1&amp;tab=$2&amp;page=$3 last; rewrite ^/profile/([^/]+)/?$ /profile.php?id=$1 last; rewrite ^/profile/?$ /profile.php last; rewrite
                ^/view/([^/]+)/page/([0-9]+)/?$ /view.php?view=$1&amp;page=$2 last; rewrite ^/view/([^/]+)/?$ /view.php?view=$1 last; rewrite ^/rss/?$ /rss.php last; rewrite ^/rss/topics/?$ /rss.php?topics=1 last; rewrite ^/rss/forum/([^/]+)/?$ /rss.php?forum=$1
                last; rewrite ^/rss/forum/([^/]+)/topics/?$ /rss.php?forum=$1&amp;topics=1 last; rewrite ^/rss/topic/([^/]+)/?$ /rss.php?topic=$1 last; rewrite ^/rss/tags/([^/]+)/?$ /rss.php?tag=$1 last; rewrite ^/rss/tags/([^/]+)/topics/?$ /rss.php?tag=$1&amp;topics=1
                last; rewrite ^/rss/profile/([^/]+)/?$ /rss.php?profile=$1 last; rewrite ^/rss/view/([^/]+)/?$ /rss.php?view=$1 last; if (-f $request_filename/index.php){ rewrite (.*) $1/index.php; } if (!-f $request_filename){ rewrite (.*) /index.php;
                } [/sourcecode] 将代码放在对应的位置即可。 看，URL漂亮多了。</div>
            </article>
          </main>
          <div id="comments">
            <div id="disqus_thread"></div>
            <script type="text/javascript">
              var disqus_config = function () {
                this.page.url = "http://blog.tengattack.com/2012/07/26/bbpress-nginx-staticify/";
                this.page.identifier = "bbpress-nginx-staticify";
              };
              (function () {
                var d = document,
                  s = d.createElement('script');
                s.src = 'https://tengattack.disqus.com/embed.js';
                s.setAttribute('data-timestamp', +new Date());
                (d.head || d.body).appendChild(s);
              })();
            </script><noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript></div>
        </div>
        <aside class="sidebar">
          <section class="widget">
            <div class="widget-component widget-tags">
              <h2 class="widget-title">Tags</h2>
              <ul>
                <li><a target="_blank" href="/tags/galgame/" title="galgame">galgame</a></li>
                <li><a target="_blank" href="/tags/nginx/" title="nginx">nginx</a></li>
                <li><a target="_blank" href="/tags/php/" title="php">php</a></li>
                <li><a target="_blank" href="/tags/psp/" title="psp">psp</a></li>
                <li><a target="_blank" href="/tags/life/" title="生活">生活</a></li>
                <li><a target="_blank" href="/tags/web/" title="web">web</a></li>
                <li><a target="_blank" href="/tags/dream/" title="梦">梦</a></li>
                <li><a target="_blank" href="/tags/nodejs/" title="nodejs">nodejs</a></li>
                <li><a target="_blank" href="/tags/c/" title="c++">c++</a></li>
                <li><a target="_blank" href="/tags/japan/" title="日本">日本</a></li>
                <li><a target="_blank" href="/tags/windows/" title="Windows">Windows</a></li>
                <li><a target="_blank" href="/tags/embed/" title="嵌入式">嵌入式</a></li>
                <li><a target="_blank" href="/tags/freebsd/" title="FreeBSD">FreeBSD</a></li>
                <li><a target="_blank" href="/tags/ssd/" title="SSD">SSD</a></li>
                <li><a target="_blank" href="/tags/blog/" title="blog">blog</a></li>
                <li><a target="_blank" href="/tags/device/" title="device">device</a></li>
                <li><a target="_blank" href="/tags/google/" title="Google">Google</a></li>
                <li><a target="_blank" href="/tags/localization/" title="汉化">汉化</a></li>
                <li><a target="_blank" href="/tags/school/" title="学校">学校</a></li>
                <li><a target="_blank" href="/tags/develop/" title="develop">develop</a></li>
                <li><a target="_blank" href="/tags/mysql/" title="MySQL">MySQL</a></li>
                <li><a target="_blank" href="/tags/os/" title="OS">OS</a></li>
                <li><a target="_blank" href="/tags/macosx/" title="MacOSX">MacOSX</a></li>
                <li><a target="_blank" href="/tags/life/" title="生活">生活</a></li>
                <li><a target="_blank" href="/tags/python/" title="python">python</a></li>
                <li><a target="_blank" href="/tags/nixie/" title="nixie">nixie</a></li>
                <li><a target="_blank" href="/tags/raspberrypi/" title="RaspberryPi">RaspberryPi</a></li>
                <li><a target="_blank" href="/tags/pcb/" title="PCB">PCB</a></li>
              </ul>
            </div>
            <div class="widget-component widget-links">
              <h2 class="widget-title">Links</h2>
              <ul class="widget-links">
                <li><a target="_blank" href="http://blog.phoenixlzx.com/">Phoenix's island</a></li>
                <li><a target="_blank" href="http://blog.cee.moe/" title="Perfect Freeze!">Cee's blog Perfect Freeze!</a></li>
                <li><a target="_blank" href="http://blog.xwenzi.com/">孑孓的水洼</a></li>
                <li><a target="_blank" href="https://takedakinji.phpfogapp.com/" title="竹田伊織的blog">Insignificantia.</a></li>
                <li><a target="_blank" href="http://vanthic.me/" title="Vanthic Noel's blog">寒凪の城</a></li>
                <li><a target="_blank" href="http://yushiyao.me/" title="Shiyao的博客">Shiyao's blog</a></li>
                <li><a target="_blank" href="http://sukey.tk/" title="苏绮的博客">初夏</a></li>
                <li><a target="_blank" href="http://legendt.me/" title="Legend Tang's blog">伝説の所</a></li>
                <li><a target="_blank" href="http://www.2333333.tk/" title="Fotile Huang's blog">MODULE 1e9+7</a></li>
                <li><a target="_blank" href="http://lightnovel.me/" title="acg 轻小说吐槽日志">轻研社</a></li>
                <li><a target="_blank" href="http://im.dimpurr.com/">钉子の次元</a></li>
              </ul>
            </div>
          </section>
        </aside>
      </div>
      <footer>© 2017 tengattack, powered by <a target="_blank" href="https://github.com/hanejs">hanejs</a></footer>
    </div>
  </div>
</body>
</html>